<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'/>
      <!--<script src='https://create3000.github.io/code/x_ite/latest/x_ite.min.js'></script>-->
        <script src="https://cdn.jsdelivr.net/npm/x_ite@8.12.5/dist/x_ite.min.js"></script>
      <style> x3d-canvas { width: 400px; height: 200px;} </style>
  </head>
  <body>
    <x3d-canvas>
      <X3D profile='Immersive'>
          <Scene>
            <Viewpoint description='Middle C, C#, D, D#' orientation='1 0 0 -0.758' position='0 2 2'></Viewpoint>
            
            <Group>
              <Transform>
                <Transform DEF ='C4key'>
                  <Shape DEF='WhiteKey'>
                      <Appearance><Material diffuseColor='0.9 0.9 0.9'></Material></Appearance>
                      <Box size='0.23 0.1 1.5'></Box>
                  </Shape>
                </Transform>
                <TouchSensor DEF='C4' description='C4 key'></TouchSensor>
                <Sound minBack='5' minFront='5'>
                  <AudioClip DEF='PitchC4' description='Pitch C4' url='"sonidos/notas/C4.wav"'></AudioClip>
                </Sound>
              </Transform>

              <Transform translation='0.125 0.1 -0.375'>
                <Transform DEF ='Cs4key'>
                  <Shape DEF='BlackKey'>
                    <Appearance><Material diffuseColor='0.4 0.4 0.4'></Material></Appearance>
                    <Box size='0.2 0.1 0.75'></Box>
                  </Shape>
                </Transform>
                <TouchSensor DEF='Cs4' description='Csharp4 key'></TouchSensor>
                <Sound minBack='5' minFront='5'>
                  <AudioClip DEF='PitchCs4' description='Pitch Csharp4' url='"sonidos/notas/Csharp4.wav"'></AudioClip>
                </Sound>
              </Transform>

              <Transform translation='0.25 0 0'>
                <Transform DEF ='D4key'><Shape USE='WhiteKey'></Shape></Transform>
                  <TouchSensor DEF='D4' description='D4 key'></TouchSensor>
                  <Sound minBack='5' minFront='5'>
                    <AudioClip DEF='PitchD4' description='Pitch D4' url='"sonidos/notas/D4.wav"'></AudioClip>
                  </Sound>
              </Transform>
              
              <Transform translation='0.375 0.1 -0.375'>
                <Transform DEF ='Ds4key'><Shape USE='BlackKey'></Shape></Transform>
                <TouchSensor DEF='Ds4' description='Dsharp4 key'></TouchSensor>
                <Sound minBack='5' minFront='5'>
                  <AudioClip DEF='PitchDs4' description='Pitch Dsharp4' url='"sonidos/notas/Dsharp4.wav"'></AudioClip>
                </Sound>
              </Transform>
            </Group>

            <TimeSensor DEF='TimerC4' cycleInterval='0.5' loop='false'></TimeSensor>
            <TimeSensor DEF='TimerCs4' cycleInterval='0.5' loop='false'></TimeSensor>
            <TimeSensor DEF='TimerD4' cycleInterval='0.5' loop='false'></TimeSensor>
            <TimeSensor DEF='TimerDs4' cycleInterval='0.5' loop='false'></TimeSensor>

            <PositionInterpolator DEF='PosicionC4' key= '0 0.25 0.5 0.75 1' 
                                     keyValue= '0 0 0
                                                0 -0.02 0
                                                0 -0.02 0
                                                0 -0.01 0
                                                0 0 0 '>
            </PositionInterpolator>
            
            <PositionInterpolator DEF='PosicionCs4' key= '0 0.25 0.5 0.75 1' 
                                     keyValue= '0 0 0
                                                0 -0.02 0
                                                0 -0.02 0
                                                0 -0.01 0
                                                0 0 0 '>
            </PositionInterpolator>

            <PositionInterpolator DEF='PosicionD4' key= '0 0.25 0.5 0.75 1' 
                                     keyValue= '0 0 0
                                                0 -0.02 0
                                                0 -0.02 0
                                                0 -0.01 0
                                                0 0 0 '>
            </PositionInterpolator>
            
            <PositionInterpolator DEF='PosicionDs4' key= '0 0.25 0.5 0.75 1' 
                                     keyValue= '0 0 0
                                                0 -0.02 0
                                                0 -0.02 0
                                                0 -0.01 0
                                                0 0 0 '>
            </PositionInterpolator>

            <!--Al pulsar al tecla correspondiente suena-->
            <ROUTE fromField='touchTime' fromNode='C4' toField='set_startTime' toNode='PitchC4'></ROUTE>
            <ROUTE fromField='touchTime' fromNode='C4' toField='set_startTime' toNode='TimerC4'></ROUTE>
            <ROUTE fromNode='TimerC4' fromField='fraction_changed' toNode='PosicionC4' toField='set_fraction'></ROUTE>
            <ROUTE fromNode='PosicionC4' fromField='value_changed' toNode='C4key' toField='set_translation'></ROUTE>
            
            
            <ROUTE fromField='touchTime' fromNode='Cs4' toField='set_startTime' toNode='PitchCs4'></ROUTE>
            <ROUTE fromField='touchTime' fromNode='Cs4' toField='set_startTime' toNode='TimerCs4'></ROUTE>
            <ROUTE fromNode='TimerCs4' fromField='fraction_changed' toNode='PosicionCs4' toField='set_fraction'></ROUTE>
            <ROUTE fromNode='PosicionCs4' fromField='value_changed' toNode='Cs4key' toField='set_translation'></ROUTE>


            <ROUTE fromField='touchTime' fromNode='D4' toField='set_startTime' toNode='PitchD4'></ROUTE>
            <ROUTE fromField='touchTime' fromNode='D4' toField='set_startTime' toNode='TimerD4'></ROUTE>
            <ROUTE fromNode='TimerD4' fromField='fraction_changed' toNode='PosicionD4' toField='set_fraction'></ROUTE>
            <ROUTE fromNode='PosicionD4' fromField='value_changed' toNode='D4key' toField='set_translation'></ROUTE>


            <ROUTE fromField='touchTime' fromNode='Ds4' toField='set_startTime' toNode='PitchDs4'></ROUTE>
            <ROUTE fromField='touchTime' fromNode='Ds4' toField='set_startTime' toNode='TimerDs4'></ROUTE>
            <ROUTE fromNode='TimerDs4' fromField='fraction_changed' toNode='PosicionDs4' toField='set_fraction'></ROUTE>
            <ROUTE fromNode='PosicionDs4' fromField='value_changed' toNode='Ds4key' toField='set_translation'></ROUTE>

          </Scene>
        </X3D>
      </x3d-canvas>
    </body>
</html>